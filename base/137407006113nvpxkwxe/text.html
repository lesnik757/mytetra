<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'Times New Roman'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:xx-large; font-weight:600; color:#7b59de; background-color:#ffffff;">update-world</span></p>
<p style=" margin-top:10px; margin-bottom:38px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#999999;">kiev1 10 марта, 2007 - 01:13</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#999999;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.gentoo.ru/forum/gentoo-linux/ustanovka-gentoo-linux"><span style=" font-size:16px; color:#336699;">Установка Gentoo Linux</span></a></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Полезные советы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Простейший путь обновления своей системы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Без сомненья, одна из лучших возможностей Gentoo — это его система управления пакетами, Portage. С помощью Portage очень легко обновить всю вашу систему одной командой. Но как это ни печально, все может пройти не так гладко, как хотелось бы. Практически каждый пользователь Gentoo, напечатав emerge -uD world и уйдя спать, мечтет проснуться утром с системой с иголочки. К сожалению, более вероятно, проснувшись, обнаружить emerge, споткнувшийся на третьем пакете из 220. И начинается борьба с проблемами и процесс emerge --resume.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Введите update-world, чтобы сэкономить день. Update-world — это сценарий bash, недавно созданный count_zero и выложенный на форумах. Сценарий управляет ходом обновления и заставляет portage пропускать неудачные сборки, продолжая собирать пакеты, пока список обновлений не закончится. Неудачные сборки добавляются в список, который можно просмотреть, когда процесс обновления завершится.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Примечание: Сценарий зависит от команды equery, входящей в пакет app-portage/gentoolkit.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Безусловно, прежде чем запустить сценарий, его нужно скачать, записать в пределах видимости из $PATH и сделать исполняемым.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Листинг 3.1: Получение сценария</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;"># wget -O /usr/bin/update-world </span><a href="http://countzero.amidal.com/files/update-world"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#336699;">http://countzero.amidal.com/files/update-world</span></a><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;"><br /># chmod +x /usr/bin/update-world</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Теперь мы сможем использовать сценарий.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Листинг 3.2: Запуск update-world</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;"># update-world --prepare</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Так, с создания списка пакетов для установки, порождаемого emerge -uD --newuse world, начинается процесс установки. (Или же, вы можете использовать update-world --empty, чтобы создать список всех пакетов в системе, подобно emerge -e world). Эта команда создает список с именем 'emergelist' в ~/.update-world/. Теперь вы можете в помощью любимого редактора изменить его, как нравится — удалить пакеты, изменить версии и так далее. Закончив с emergelist, можете приступать к следующему этапу:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Листинг 3.3: Запуск update-world (продолжение)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;"># update-world --install</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Tahoma,Arial,Helvetica,sans-serif'; font-size:16px; color:#000000;">Фактически эта команда начинает процесс сборки, как если бы вы ввели emerge -uD world. Отличие заключается в том, что если пакет не соберется по той или иной причине — он будет добавлен в список 'failedlist' в ~/.update-world/. Также в ~/.update-world/[дата]/log/ создается ссылка на журнал portage этого пакета (обычно находящийся в /var/log/portage). Как только процесс завершится, у вас сразу будет полный список сбойных пакетов, что сэкономит массу времени. Если понадобится остановить процесс, просто нажмите 'Control-C', чтобы прервать его. Процесс обновления можно перезапускать с того же места, где он был остановлен, вводом команды update-world --install.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p></body></html>